Refactor internal provider routing system. It becomes more simple and readable.
The loader generation has been accelerated by 20%.
